{"version":3,"sources":["views/api/api-create/ApiCreate.tsx","axios/config.ts","components/spots/index.tsx","services/api.ts","utils/tools.ts"],"names":["Option","__webpack_exports__","antd_es_form__WEBPACK_IMPORTED_MODULE_3__","create","props","methods","editorRef","useRef","_useState2","_slicedToArray","useState","code","setCode","handleSubmit","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee2","e","wrap","_context2","prev","next","preventDefault","form","validateFields","_ref2","_callee","err","fieldsValue","name","method","desc","url","delay","response","param","_context","JSON","parse","stripComment","t0","antd_es_message__WEBPACK_IMPORTED_MODULE_7__","error","abrupt","concat","options","params","project","location","search","split","apiCreate","sent","success","history","goBack","t1","stop","_x2","_x3","apply","this","arguments","_x","getFieldDecorator","react__WEBPACK_IMPORTED_MODULE_10___default","a","createElement","className","components_spots__WEBPACK_IMPORTED_MODULE_12__","_extends","layout","onSubmit","Item","label","rules","required","message","pattern","antd_es_input__WEBPACK_IMPORTED_MODULE_5__","maxLength","placeholder","initialValue","antd_es_select__WEBPACK_IMPORTED_MODULE_9__","map","k","key","value","addonBefore","addonAfter","type","antd_es_button__WEBPACK_IMPORTED_MODULE_1__","style","width","htmlType","onClick","id","current","trigger","react_monaco_editor__WEBPACK_IMPORTED_MODULE_11___default","height","language","theme","defaultValue","selectOnLineNumbers","onChange","newValue","editorWillMount","monaco","editorDidMount","focus","setTimeout","codeMessage","200","201","202","204","400","401","403","404","405","406","410","422","500","502","503","504","instance","axios","baseURL","timeout","headers","Content-Type","interceptors","request","use","config","Promise","reject","data","msg","antd_es_message__WEBPACK_IMPORTED_MODULE_3__","warning","status","antd_es_notification__WEBPACK_IMPORTED_MODULE_1__","placement","duration","description","path","newUrl","Object","keys","v","push","encodeURIComponent","paramStr","join","curConfig","_objectSpread","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","Spots","getRandomColor","r","Math","floor","random","g","b","getRandomTop","getRandomMargin","SpotsContent","useMemo","sArr","i","Fragment","radius","background","marginTop","marginLeft","top","left","res","queryApi","updateApi","_ref3","_callee3","_context3","deleteApi","_ref4","_callee4","_context4","_x4","source","replace","d"],"mappings":"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","file":"static/js/7.e20be476.chunk.js","sourcesContent":["/* eslint-disable import/extensions */\n/* eslint-disable import/no-unresolved */\nimport React, { useState, useRef } from 'react';\nimport { Form, Input, Button, message, Select } from 'antd';\nimport MonacoEditor, {\n  EditorWillMount,\n  ChangeHandler,\n  EditorDidMount,\n} from 'react-monaco-editor';\nimport { FormComponentProps } from 'antd/lib/form';\nimport Spots from 'components/spots';\nimport './index.less';\nimport { stripComment } from 'utils/tools';\nimport { editor } from 'monaco-editor';\nimport { apiCreate } from 'services/api';\n\nconst { Option } = Select;\n\ninterface FormProps extends FormComponentProps {\n  [propName: string]: any; // 要传进来的属性\n}\n\nfunction ApiCreate(props: any) {\n  const methods = ['get', 'post', 'put', 'delete', 'patch'];\n  const formItemLayout = {\n    // labelCol: {\n    //   xs: { span: 2 },\n    //   sm: { span: 3 },\n    // },\n    // wrapperCol: {\n    //   xs: { span: 4 },\n    //   sm: { span: 6 },\n    // },\n    // colon: false,\n  };\n\n  // 保存编辑器实例\n  const editorRef = useRef<editor.IStandaloneCodeEditor | null>(null);\n\n  const options = {\n    selectOnLineNumbers: true,\n  };\n\n  const [code, setCode] = useState('// type your mock data...');\n\n  const editorDidMount: EditorDidMount = (e, monaco) => {\n    console.log('editorDidMount', e);\n    console.log('monaco', monaco);\n    e.focus();\n    e.layout();\n    editorRef.current = e;\n    setTimeout(() => {\n      e.layout();\n      editorRef.current = e;\n      // const model = editor.getModel();\n      // if (model) {\n      //   console.log(model.getValue(), 'model.getValue()');\n      //   // console.log(JSON.parse(model.getValue()));\n      // }\n    }, 100);\n  };\n  const editorWillMount: EditorWillMount = monaco => {\n    console.log('editorWillMount', monaco);\n  };\n  const onChange: ChangeHandler = (newValue, e) => {\n    console.log('onChange', newValue, e);\n    // console.log(stripComment(newValue));\n    setCode(newValue);\n  };\n\n  const trigger = (e: editor.IStandaloneCodeEditor, id: string) => {\n    console.log(e, 'meditor');\n    if (!e) return;\n    e.trigger('anyString', id, null);\n  };\n\n  // 格式化代码\n  const onFormat = () => {\n    if (editorRef.current) {\n      trigger(editorRef.current, 'editor.action.formatDocument');\n    }\n  };\n\n  const handleSubmit = async (e: { preventDefault: () => void }) => {\n    e.preventDefault();\n    props.form.validateFields(async (err: any, fieldsValue: any) => {\n      if (!err) {\n        console.log(fieldsValue);\n        const { name, method, desc, url, delay } = fieldsValue;\n        let response;\n        try {\n          response = JSON.parse(stripComment(code) || '{}');\n          console.log(JSON.parse(stripComment(code) || '{}'), 'code');\n        } catch (error) {\n          console.log(error);\n          message.error('mock 数据有错误，请检查修改后再次创建');\n          return;\n        }\n        const param = {\n          name,\n          desc: desc || '',\n          url: `/${url}`,\n          options: {\n            method,\n            params: {},\n            response,\n            delay,\n          },\n          project: props.location.search.split('=')[1],\n        };\n        console.log(param, 'param');\n        try {\n          const rs = await apiCreate(param);\n          if (rs) {\n            message.success('接口创建成功');\n            props.history.goBack();\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    });\n  };\n\n  const { getFieldDecorator } = props.form;\n\n  return (\n    <div className=\"api-create\">\n      <div className=\"api-create-side\">\n        <Spots />\n        <div className=\"header-info\">\n          <h2>创建接口</h2>\n          <p>(=￣ ρ￣=) ..zzZZ</p>\n        </div>\n        <Form\n          layout=\"vertical\"\n          onSubmit={handleSubmit}\n          {...formItemLayout}\n          className=\"api-create-form\"\n        >\n          <Form.Item label=\"接口名称\">\n            {getFieldDecorator('name', {\n              rules: [\n                {\n                  required: true,\n                  message: '名称不能为空',\n                },\n                {\n                  pattern: /^[\\u4e00-\\u9fa5a-zA-Z0-9\\-_.]{0,30}$/,\n                  message:\n                    '仅支持汉字、英文字母、数字、下划线(_)、连字符(-)、点(.)',\n                },\n              ],\n            })(<Input maxLength={30} placeholder=\"\" />)}\n          </Form.Item>\n          <Form.Item label=\"方法\">\n            {getFieldDecorator('method', {\n              rules: [\n                {\n                  required: true,\n                },\n              ],\n              initialValue: methods[0],\n            })(\n              <Select>\n                {methods.map((k: string) => (\n                  <Option key={k} value={k}>\n                    {k}\n                  </Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item label=\"URL\">\n            {getFieldDecorator('url', {\n              rules: [\n                {\n                  required: true,\n                  message: 'URL不能为空',\n                },\n                {\n                  pattern: /^[a-zA-Z/]*$/,\n                  message: '格式为大小写英文字母、/',\n                },\n              ],\n            })(<Input addonBefore=\"/\" maxLength={60} placeholder=\"\" />)}\n          </Form.Item>\n          <Form.Item label=\"接口返回延时\">\n            {getFieldDecorator('delay', {\n              rules: [\n                {\n                  required: true,\n                  message: '延时不能为空',\n                },\n                {\n                  pattern: /^(0|[1-9][0-9]*)$/,\n                  message: '延时为正整数',\n                },\n              ],\n              initialValue: 0,\n            })(\n              <Input\n                addonAfter=\"ms\"\n                type=\"number\"\n                maxLength={8}\n                placeholder=\"\"\n              />\n            )}\n          </Form.Item>\n          <Form.Item label=\"接口描述\">\n            {getFieldDecorator('desc')(\n              <Input maxLength={255} placeholder=\"\" />\n            )}\n          </Form.Item>\n          <Form.Item className=\"ta-c\">\n            <Button style={{ width: '100%' }} type=\"primary\" htmlType=\"submit\">\n              创建\n            </Button>\n          </Form.Item>\n        </Form>\n        <div className=\"side-btn\">\n          <Button type=\"primary\" onClick={onFormat}>\n            格式化\n          </Button>\n          <Button\n            type=\"primary\"\n            onClick={() => {\n              props.history.goBack();\n            }}\n          >\n            返回\n          </Button>\n        </div>\n      </div>\n      <div className=\"api-create-main\">\n        <MonacoEditor\n          width=\"100%\"\n          height=\"100%\"\n          language=\"json\"\n          theme=\"vs\"\n          defaultValue={code}\n          options={options}\n          onChange={onChange}\n          editorWillMount={editorWillMount}\n          editorDidMount={editorDidMount}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Form.create<FormProps>({})(ApiCreate);\n","import axios, { AxiosRequestConfig } from 'axios';\nimport { message, notification } from 'antd';\n\ntype Response<T> = {\n  [P in keyof T]: T[P];\n} & { code: number | string };\n\n// HTTP code码\nconst codeMessage: { [key: string]: string } = {\n  200: '服务器成功返回请求的数据。',\n  201: '无数据',\n  202: '一个请求已经进入后台排队（异步任务）。',\n  204: '删除数据成功。',\n  400: '发出的请求有错误，服务器没有进行新建或修改数据的操作。',\n  401: '用户没有权限（令牌、用户名、密码错误）。',\n  403: '用户没有访问权限',\n  404: '发出的请求针对的是不存在的记录，服务器没有进行操作。',\n  405: '方法不被允许',\n  406: '请求的格式不可得。',\n  410: '请求的资源被永久删除，且不会再得到的。',\n  422: '当创建一个对象时，发生一个验证错误。',\n  500: '服务器发生错误，请检查服务器。',\n  502: '网关错误。',\n  503: '服务不可用，服务器暂时过载或维护。',\n  504: '网关超时。',\n};\n\nconst getBaseUrl = () => {\n  if (process.env.NODE_ENV === 'development') {\n    // 如果在开发环境的时候可以用于本地联调\n    // return 'http://localhost:1988';\n  }\n  return '';\n};\n\n// 新创建一个axios实例，并进行基础配置\nconst instance = axios.create({\n  baseURL: getBaseUrl(),\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n    // \"Content-Type\":\"application/x-www-form-urlencoded;charset=utf-8\"\n  },\n});\n\n// 添加请求拦截器\ninstance.interceptors.request.use(\n  config => {\n    // 再次设置token或者添加loading等请求前的操作\n    // 添加一个loading\n    // store.dispatch(actions.showLoading(true));\n    return config;\n  },\n  error => {\n    return Promise.reject(error);\n  }\n);\n\n// 添加xi响应拦截器\ninstance.interceptors.response.use(\n  response => {\n    // 响应数据后做点什么\n    // 添加一个loading\n    // store.dispatch(actions.showLoading(false));\n    // 存在业务异常 抛出给业务代码去捕获\n    const { data } = response;\n    if (data.code != 200) {\n      const msg = data.msg || data.message || '';\n      message.warning(msg);\n      return Promise.reject(data);\n    }\n    // 不存在业务异常返回数据\n    return data;\n  },\n  error => {\n    if (error && error.response) {\n      const { status } = error.response;\n      console.warn(\n        `http error: status-${status} message-${codeMessage[status]}`\n      );\n\n      if (codeMessage[status] !== null || undefined) {\n        notification.warning({\n          placement: 'topRight',\n          duration: 2,\n          message: '提示',\n          description: `接口：${error.response.data.path}，${error.response.data.message}`,\n        });\n      } else {\n        notification.warning({\n          placement: 'topRight',\n          duration: 2,\n          message: '提示',\n          description: error,\n        });\n      }\n    }\n    return Promise.reject(error); // 非业务异常无需抛出错误 内部吞掉\n  }\n);\n\n/**\n * get请求\n * @method get\n * @param {url, params, loading} 请求地址，请求参数，是否需要加载层\n */\nconst get = (url: string, params: any) => {\n  return new Promise((resolve, reject) => {\n    // {\n    //   params: params\n    // }\n    instance\n      .get(url, params)\n      .then(res => {\n        resolve(res);\n      })\n      ['catch'](err => {\n        reject(err);\n      });\n  });\n};\n/**\n * post请求\n * @method post\n * @param {url, params} 请求地址，请求参数，是否需要加载层\n */\nconst post = (url: string, data: any) => {\n  return new Promise((resolve, reject) => {\n    // qs.stringify(data)\n    instance\n      .post(url, data)\n      .then(res => {\n        console.log(res);\n        resolve(res);\n      })\n      ['catch'](err => {\n        reject(err);\n      });\n  });\n};\n\nfunction request<T>(config: AxiosRequestConfig): Promise<Response<T>> | null {\n  let newUrl = config.url;\n  if (\n    (config.method === 'GET' ||\n      config.method === 'DELETE' ||\n      config.method === 'PUT') &&\n    config.data\n  ) {\n    const param: string[] = [];\n    Object.keys(config.data).map((v: string, k: number) => {\n      param.push(`${v}=${encodeURIComponent(config.data[v])}`);\n    });\n    const paramStr = param.join('&');\n    newUrl = `${newUrl}?${paramStr}`;\n  }\n  const curConfig = { ...config, url: newUrl };\n  return (instance.request<Response<T>>(curConfig) as any) as Promise<\n    Response<T>\n  >;\n}\nexport { get, post, request, Response };\n","import React, { useMemo } from 'react';\nimport './index.less';\n\nfunction Spots(props: any) {\n  const NUM = 10;\n  const getRandomColor = () => {\n    const r = Math.floor(Math.random() * 100) + 155;\n    const g = Math.floor(Math.random() * 100) + 115;\n    const b = Math.floor(Math.random() * 100) + 115;\n    return `rgb(${r},${g},${b})`;\n  };\n  const getRandomWidth = () => {\n    return Math.floor(Math.random() * 60);\n  };\n  const getRandomTop = () => {\n    return `${Math.floor(Math.random() * 100)}%`;\n  };\n  const getRandomMargin = () => {\n    return `-${Math.floor(Math.random() * 60)}px`;\n  };\n\n  const SpotsContent = useMemo(() => {\n    const sArr: number[] = [];\n    for (let i = 0; i < NUM; i++) {\n      sArr.push(i);\n    }\n    return (\n      <>\n        {sArr.map(k => {\n          const radius = getRandomWidth();\n          return (\n            <span\n              key={k}\n              className=\"decorate\"\n              style={{\n                background: getRandomColor(),\n                width: radius,\n                height: radius,\n                marginTop: getRandomMargin(),\n                marginLeft: getRandomMargin(),\n                top: getRandomTop(),\n                left: getRandomTop(),\n              }}\n            />\n          );\n        })}\n      </>\n    );\n  }, []);\n\n  return <div className=\"spots\">{SpotsContent}</div>;\n}\n\nexport default Spots;\n","import { Api } from 'typings/api';\nimport { request, Response } from '../axios/config';\n\ninterface RequestResponse {\n  code: number;\n  message: string;\n  // success: boolean;\n  data: any;\n}\n\n// 接口创建\nexport const apiCreate = async (params: Partial<Api>) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/create',\n    method: 'POST',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 接口查询\nexport const queryApi = async (params: { apiId: string }) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/query',\n    method: 'GET',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 接口更新\nexport const updateApi = async (params: Api) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/update',\n    method: 'POST',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 接口删除\nexport const deleteApi = async (params: { apiId: string }) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/delete',\n    method: 'DELETE',\n    data: params,\n  });\n  return res && res.data;\n};\n","// 事件触发函数\nexport function triggerEvent(el: Element | Window, type: string) {\n  if ('createEvent' in document) {\n    // modern browsers, IE9+\n    const e = document.createEvent('HTMLEvents');\n    e.initEvent(type, false, true);\n    el.dispatchEvent(e);\n  }\n}\n\nexport function stripComment(source: string): string {\n  const reg = /((?<!:)\\/\\/.*)|(\\/\\*[\\s\\S]*?\\*\\/)/g;\n  return source == null ? '' : source.replace(reg, '');\n}\n"],"sourceRoot":""}