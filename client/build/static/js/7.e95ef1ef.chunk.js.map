{"version":3,"sources":["views/api/api-create/ApiCreate.tsx","utils/request.ts","components/spots/index.tsx","services/api.ts","utils/tools.ts"],"names":["Option","__webpack_exports__","antd_es_form__WEBPACK_IMPORTED_MODULE_3__","create","props","methods","editorRef","useRef","_useState2","_slicedToArray","useState","code","setCode","onFormat","e","id","current","trigger","handleSubmit","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee2","wrap","_context2","prev","next","preventDefault","form","validateFields","_ref2","_callee","err","fieldsValue","name","method","desc","url","delay","response","param","_context","JSON","parse","stripComment","t0","antd_es_message__WEBPACK_IMPORTED_MODULE_7__","error","abrupt","concat","options","params","project","location","search","split","apiCreate","sent","success","history","goBack","t1","stop","_x2","_x3","apply","this","arguments","_x","useEffect","setTimeout","getFieldDecorator","react__WEBPACK_IMPORTED_MODULE_10___default","a","createElement","className","components_spots__WEBPACK_IMPORTED_MODULE_12__","_extends","layout","onSubmit","Item","label","rules","required","message","pattern","antd_es_input__WEBPACK_IMPORTED_MODULE_5__","maxLength","placeholder","initialValue","antd_es_select__WEBPACK_IMPORTED_MODULE_9__","map","k","key","value","addonBefore","addonAfter","type","antd_es_button__WEBPACK_IMPORTED_MODULE_1__","style","width","htmlType","onClick","react_monaco_editor__WEBPACK_IMPORTED_MODULE_11___default","height","language","theme","defaultValue","selectOnLineNumbers","onChange","newValue","editorWillMount","monaco","editorDidMount","focus","codeMessage","200","201","202","204","400","401","403","404","405","406","410","422","500","502","503","504","instance","axios","baseURL","timeout","headers","Content-Type","interceptors","request","use","config","Promise","reject","data","msg","antd_es_message__WEBPACK_IMPORTED_MODULE_3__","warning","status","antd_es_notification__WEBPACK_IMPORTED_MODULE_1__","placement","duration","description","path","newUrl","Object","keys","v","push","encodeURIComponent","paramStr","join","curConfig","_objectSpread","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","Spots","getRandomColor","r","Math","floor","random","g","b","getRandomTop","getRandomMargin","SpotsContent","useMemo","sArr","i","Fragment","radius","background","marginTop","marginLeft","top","left","res","queryApi","updateApi","_ref3","_callee3","_context3","deleteApi","_ref4","_callee4","_context4","_x4","source","replace","d"],"mappings":"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","file":"static/js/7.e95ef1ef.chunk.js","sourcesContent":["/* eslint-disable import/extensions */\n/* eslint-disable import/no-unresolved */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Form, Input, Button, message, Select } from 'antd';\nimport MonacoEditor, {\n  EditorWillMount,\n  ChangeHandler,\n  EditorDidMount,\n} from 'react-monaco-editor';\nimport { FormComponentProps } from 'antd/lib/form';\nimport Spots from 'components/spots';\nimport './index.less';\nimport { stripComment } from 'utils/tools';\nimport { editor } from 'monaco-editor';\nimport { apiCreate } from 'services/api';\n\nconst { Option } = Select;\n\ninterface FormProps extends FormComponentProps {\n  [propName: string]: any; // 要传进来的属性\n}\n\nfunction ApiCreate(props: any) {\n  const methods = ['get', 'post', 'put', 'delete', 'patch'];\n  const formItemLayout = {\n    // labelCol: {\n    //   xs: { span: 2 },\n    //   sm: { span: 3 },\n    // },\n    // wrapperCol: {\n    //   xs: { span: 4 },\n    //   sm: { span: 6 },\n    // },\n    // colon: false,\n  };\n\n  // 保存编辑器实例\n  const editorRef = useRef<editor.IStandaloneCodeEditor | null>(null);\n\n  const options = {\n    selectOnLineNumbers: true,\n  };\n\n  const [code, setCode] = useState(\n    '// 在此处编写接口响应数据，支持 mockjs 语法...\\n{\"data\": {}}'\n  );\n\n  const editorDidMount: EditorDidMount = (e, monaco) => {\n    console.log('editorDidMount', e);\n    console.log('monaco', monaco);\n    e.focus();\n    e.layout();\n    editorRef.current = e;\n    setTimeout(() => {\n      e.layout();\n      editorRef.current = e;\n      // const model = editor.getModel();\n      // if (model) {\n      //   console.log(model.getValue(), 'model.getValue()');\n      //   // console.log(JSON.parse(model.getValue()));\n      // }\n    }, 100);\n  };\n  const editorWillMount: EditorWillMount = monaco => {\n    console.log('editorWillMount', monaco);\n  };\n  const onChange: ChangeHandler = (newValue, e) => {\n    console.log('onChange', newValue, e);\n    // console.log(stripComment(newValue));\n    setCode(newValue);\n  };\n\n  const trigger = (e: editor.IStandaloneCodeEditor, id: string) => {\n    console.log(e, 'meditor');\n    if (!e) return;\n    e.trigger('anyString', id, null);\n  };\n\n  // 格式化代码\n  const onFormat = () => {\n    if (editorRef.current) {\n      trigger(editorRef.current, 'editor.action.formatDocument');\n    }\n  };\n\n  const handleSubmit = async (e: { preventDefault: () => void }) => {\n    e.preventDefault();\n    props.form.validateFields(async (err: any, fieldsValue: any) => {\n      if (!err) {\n        console.log(fieldsValue);\n        const { name, method, desc, url, delay } = fieldsValue;\n        let response;\n        try {\n          response = JSON.parse(stripComment(code) || '{}');\n          console.log(JSON.parse(stripComment(code) || '{}'), 'code');\n        } catch (error) {\n          console.log(error);\n          message.error('mock 数据有错误，请检查修改后再次创建');\n          return;\n        }\n        const param = {\n          name,\n          desc: desc || '',\n          url: `/${url}`,\n          options: {\n            method,\n            params: {},\n            response,\n            delay,\n          },\n          project: props.location.search.split('=')[1],\n        };\n        console.log(param, 'param');\n        try {\n          const rs = await apiCreate(param);\n          if (rs) {\n            message.success('接口创建成功');\n            props.history.goBack();\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    });\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      onFormat();\n    }, 100);\n    setTimeout(() => {\n      onFormat();\n    }, 160);\n    setTimeout(() => {\n      onFormat();\n    }, 500);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const { getFieldDecorator } = props.form;\n\n  return (\n    <div className=\"api-create\">\n      <div className=\"api-create-side\">\n        <Spots />\n        <div className=\"header-info\">\n          <h2>创建接口</h2>\n          <p>(=￣ ρ￣=) ..zzZZ</p>\n        </div>\n        <Form\n          layout=\"vertical\"\n          onSubmit={handleSubmit}\n          {...formItemLayout}\n          className=\"api-create-form\"\n        >\n          <Form.Item label=\"接口名称\">\n            {getFieldDecorator('name', {\n              rules: [\n                {\n                  required: true,\n                  message: '名称不能为空',\n                },\n                {\n                  pattern: /^[\\u4e00-\\u9fa5a-zA-Z0-9\\-_.]{0,30}$/,\n                  message:\n                    '仅支持汉字、英文字母、数字、下划线(_)、连字符(-)、点(.)',\n                },\n              ],\n            })(<Input maxLength={30} placeholder=\"\" />)}\n          </Form.Item>\n          <Form.Item label=\"方法\">\n            {getFieldDecorator('method', {\n              rules: [\n                {\n                  required: true,\n                },\n              ],\n              initialValue: methods[0],\n            })(\n              <Select>\n                {methods.map((k: string) => (\n                  <Option key={k} value={k}>\n                    {k}\n                  </Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item label=\"URL\">\n            {getFieldDecorator('url', {\n              rules: [\n                {\n                  required: true,\n                  message: 'URL不能为空',\n                },\n                {\n                  pattern: /^[a-zA-Z0-9-_/]*$/,\n                  message: '格式为大小写英文字母、数字、/、-、_',\n                },\n              ],\n            })(<Input addonBefore=\"/\" maxLength={60} placeholder=\"\" />)}\n          </Form.Item>\n          <Form.Item label=\"接口返回延时\">\n            {getFieldDecorator('delay', {\n              rules: [\n                {\n                  required: true,\n                  message: '延时不能为空',\n                },\n                {\n                  pattern: /^(0|[1-9][0-9]*)$/,\n                  message: '延时为正整数',\n                },\n              ],\n              initialValue: 0,\n            })(\n              <Input\n                addonAfter=\"ms\"\n                type=\"number\"\n                maxLength={8}\n                placeholder=\"\"\n              />\n            )}\n          </Form.Item>\n          <Form.Item label=\"接口描述\">\n            {getFieldDecorator('desc')(\n              <Input maxLength={255} placeholder=\"\" />\n            )}\n          </Form.Item>\n          <Form.Item className=\"ta-c\">\n            <Button style={{ width: '100%' }} type=\"primary\" htmlType=\"submit\">\n              创建\n            </Button>\n          </Form.Item>\n        </Form>\n        <div className=\"side-btn\">\n          <Button type=\"primary\" onClick={onFormat}>\n            格式化\n          </Button>\n          <Button\n            type=\"primary\"\n            onClick={() => {\n              props.history.goBack();\n            }}\n          >\n            返回\n          </Button>\n        </div>\n      </div>\n      <div className=\"api-create-main\">\n        <MonacoEditor\n          width=\"100%\"\n          height=\"100%\"\n          language=\"json\"\n          theme=\"vs\"\n          defaultValue={code}\n          options={options}\n          onChange={onChange}\n          editorWillMount={editorWillMount}\n          editorDidMount={editorDidMount}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Form.create<FormProps>({})(ApiCreate);\n","import axios, { AxiosRequestConfig } from 'axios';\nimport { message, notification } from 'antd';\n\ntype Response<T> = {\n  [P in keyof T]: T[P];\n} & { code: number | string };\n\n// HTTP code码\nconst codeMessage: { [key: string]: string } = {\n  200: '服务器成功返回请求的数据。',\n  201: '无数据',\n  202: '一个请求已经进入后台排队（异步任务）。',\n  204: '删除数据成功。',\n  400: '发出的请求有错误，服务器没有进行新建或修改数据的操作。',\n  401: '用户没有权限（令牌、用户名、密码错误）。',\n  403: '用户没有访问权限',\n  404: '发出的请求针对的是不存在的记录，服务器没有进行操作。',\n  405: '方法不被允许',\n  406: '请求的格式不可得。',\n  410: '请求的资源被永久删除，且不会再得到的。',\n  422: '当创建一个对象时，发生一个验证错误。',\n  500: '服务器发生错误，请检查服务器。',\n  502: '网关错误。',\n  503: '服务不可用，服务器暂时过载或维护。',\n  504: '网关超时。',\n};\n\nconst getBaseUrl = () => {\n  if (process.env.NODE_ENV === 'development') {\n    // 如果在开发环境的时候可以用于本地联调\n    // return 'http://localhost:1988';\n  }\n  return '';\n};\n\n// 新创建一个axios实例，并进行基础配置\nconst instance = axios.create({\n  baseURL: getBaseUrl(),\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n    // \"Content-Type\":\"application/x-www-form-urlencoded;charset=utf-8\"\n  },\n});\n\n// 添加请求拦截器\ninstance.interceptors.request.use(\n  config => {\n    // 再次设置token或者添加loading等请求前的操作\n    // 添加一个loading\n    // store.dispatch(actions.showLoading(true));\n    return config;\n  },\n  error => {\n    return Promise.reject(error);\n  }\n);\n\n// 添加xi响应拦截器\ninstance.interceptors.response.use(\n  response => {\n    // 响应数据后做点什么\n    // 添加一个loading\n    // store.dispatch(actions.showLoading(false));\n    // 存在业务异常 抛出给业务代码去捕获\n    const { data } = response;\n    if (data.code != 200) {\n      const msg = data.msg || data.message || '';\n      message.warning(msg);\n      return Promise.reject(data);\n    }\n    // 不存在业务异常返回数据\n    return data;\n  },\n  error => {\n    if (error && error.response) {\n      const { status } = error.response;\n      console.warn(\n        `http error: status-${status} message-${codeMessage[status]}`\n      );\n\n      if (codeMessage[status] !== null || undefined) {\n        notification.warning({\n          placement: 'topRight',\n          duration: 2,\n          message: '提示',\n          description: `接口：${error.response.data.path}，${error.response.data.message}`,\n        });\n      } else {\n        notification.warning({\n          placement: 'topRight',\n          duration: 2,\n          message: '提示',\n          description: error,\n        });\n      }\n    }\n    return Promise.reject(error); // 非业务异常无需抛出错误 内部吞掉\n  }\n);\n\n/**\n * get请求\n * @method get\n * @param {url, params, loading} 请求地址，请求参数，是否需要加载层\n */\nconst get = (url: string, params: any) => {\n  return new Promise((resolve, reject) => {\n    // {\n    //   params: params\n    // }\n    instance\n      .get(url, params)\n      .then(res => {\n        resolve(res);\n      })\n      ['catch'](err => {\n        reject(err);\n      });\n  });\n};\n/**\n * post请求\n * @method post\n * @param {url, params} 请求地址，请求参数，是否需要加载层\n */\nconst post = (url: string, data: any) => {\n  return new Promise((resolve, reject) => {\n    // qs.stringify(data)\n    instance\n      .post(url, data)\n      .then(res => {\n        console.log(res);\n        resolve(res);\n      })\n      ['catch'](err => {\n        reject(err);\n      });\n  });\n};\n\nfunction request<T>(config: AxiosRequestConfig): Promise<Response<T>> | null {\n  let newUrl = config.url;\n  if (\n    (config.method === 'GET' ||\n      config.method === 'DELETE' ||\n      config.method === 'PUT') &&\n    config.data\n  ) {\n    const param: string[] = [];\n    Object.keys(config.data).map((v: string, k: number) => {\n      param.push(`${v}=${encodeURIComponent(config.data[v])}`);\n    });\n    const paramStr = param.join('&');\n    newUrl = `${newUrl}?${paramStr}`;\n  }\n  const curConfig = { ...config, url: newUrl };\n  return (instance.request<Response<T>>(curConfig) as any) as Promise<\n    Response<T>\n  >;\n}\nexport { get, post, request, Response };\n","import React, { useMemo } from 'react';\nimport './index.less';\n\nfunction Spots(props: any) {\n  const NUM = 10;\n  const getRandomColor = () => {\n    const r = Math.floor(Math.random() * 100) + 155;\n    const g = Math.floor(Math.random() * 100) + 115;\n    const b = Math.floor(Math.random() * 100) + 115;\n    return `rgb(${r},${g},${b})`;\n  };\n  const getRandomWidth = () => {\n    return Math.floor(Math.random() * 60);\n  };\n  const getRandomTop = () => {\n    return `${Math.floor(Math.random() * 100)}%`;\n  };\n  const getRandomMargin = () => {\n    return `-${Math.floor(Math.random() * 60)}px`;\n  };\n\n  const SpotsContent = useMemo(() => {\n    const sArr: number[] = [];\n    for (let i = 0; i < NUM; i++) {\n      sArr.push(i);\n    }\n    return (\n      <>\n        {sArr.map(k => {\n          const radius = getRandomWidth();\n          return (\n            <span\n              key={k}\n              className=\"decorate\"\n              style={{\n                background: getRandomColor(),\n                width: radius,\n                height: radius,\n                marginTop: getRandomMargin(),\n                marginLeft: getRandomMargin(),\n                top: getRandomTop(),\n                left: getRandomTop(),\n              }}\n            />\n          );\n        })}\n      </>\n    );\n  }, []);\n\n  return <div className=\"spots\">{SpotsContent}</div>;\n}\n\nexport default Spots;\n","import { Api } from 'typings/api';\nimport { request, Response } from '../utils/request';\n\ninterface RequestResponse {\n  code: number;\n  message: string;\n  // success: boolean;\n  data: any;\n}\n\n// 接口创建\nexport const apiCreate = async (params: Partial<Api>) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/create',\n    method: 'POST',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 接口查询\nexport const queryApi = async (params: { apiId: string }) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/query',\n    method: 'GET',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 接口更新\nexport const updateApi = async (params: Api) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/update',\n    method: 'POST',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 接口删除\nexport const deleteApi = async (params: { apiId: string }) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/delete',\n    method: 'DELETE',\n    data: params,\n  });\n  return res && res.data;\n};\n","// 事件触发函数\nexport function triggerEvent(el: Element | Window, type: string) {\n  if ('createEvent' in document) {\n    // modern browsers, IE9+\n    const e = document.createEvent('HTMLEvents');\n    e.initEvent(type, false, true);\n    el.dispatchEvent(e);\n  }\n}\n\nexport function stripComment(source: string): string {\n  const reg = /((?<!:)\\/\\/.*)|(\\/\\*[\\s\\S]*?\\*\\/)/g;\n  return source == null ? '' : source.replace(reg, '');\n}\n"],"sourceRoot":""}