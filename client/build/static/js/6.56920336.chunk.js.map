{"version":3,"sources":["views/project/project-detail/components/ProjectList.tsx","views/project/project-detail/ProjectDetail.tsx","utils/request.ts","components/spots/index.tsx","services/api.ts","services/project.ts","config/index.js"],"names":["ProjectList","props","_useState2","_slicedToArray","useState","projectList","setProjectList","getAllProject","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","rs","wrap","_context","prev","next","getProjectList","sent","setCurId","projectId","t0","stop","apply","this","arguments","delProj","_ref2","_callee2","param","_context2","abrupt","deleteProject","message","success","concat","_x","cancel","e","useEffect","react_default","a","createElement","className","map","item","key","name","onClick","desc","popconfirm","title","onConfirm","onCancel","okText","cancelText","icon","type","Panel","customPanelStyle","background","borderRadius","marginBottom","border","width","overflow","__webpack_exports__","es_form","create","history","useHistory","headRef","useRef","methodColor","get","post","put","delete","patch","ProjectDetail_slicedToArray","curId","_useState4","proxy","target","baseUrl","apis","createTime","modifiedTime","project","setProject","_useState6","drawerVisible","setDrawerVisible","query","useCallback","ProjectDetail_asyncToGenerator","queryProject","delApi","apiId","deleteApi","handleScroll","head","current","app","document","getElementsByClassName","scrollTop","style","paddingTop","paddingBottom","columns","dataIndex","align","ellipsis","render","text","tag","color","record","Fragment","path","config","host","port","url","input","setAttribute","body","appendChild","select","execCommand","removeChild","copyUrl","push","id","data","idx","_id","method","options","delay","handleSubmit","_ref3","_callee4","_context4","preventDefault","form","validateFields","_ref4","_callee3","err","fieldsValue","cookie","status","_context3","updateProject","_x3","_x4","_x2","addEventListener","removeEventListener","getFieldDecorator","components_ProjectList","_extends","ref","spots","es_button","descriptions","column","Item","label","collapse","bordered","expandIcon","_ref5","isActive","rotate","header","maxWidth","table","size","expandedRowRender","dataSource","height","drawer","onClose","visible","bodyStyle","layout","hideRequiredMark","onSubmit","row","gutter","col","span","rules","required","pattern","initialValue","es_input","maxLength","placeholder","substr","addonBefore","TextArea","rows","valuePropName","es_switch","position","right","bottom","borderTop","padding","textAlign","htmlType","react_router_dom","to","codeMessage","200","201","202","204","400","401","403","404","405","406","410","422","500","502","503","504","instance","axios","baseURL","timeout","headers","Content-Type","interceptors","request","use","error","Promise","reject","response","code","msg","antd_es_message__WEBPACK_IMPORTED_MODULE_3__","warning","antd_es_notification__WEBPACK_IMPORTED_MODULE_1__","placement","duration","description","newUrl","Object","keys","v","k","encodeURIComponent","paramStr","join","curConfig","_objectSpread","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","Spots","getRandomColor","r","Math","floor","random","g","b","getRandomTop","getRandomMargin","SpotsContent","useMemo","sArr","i","radius","marginTop","marginLeft","top","left","apiCreate","params","res","queryApi","updateApi","projectCreate","_callee5","_context5","module","exports"],"mappings":"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","file":"static/js/6.56920336.chunk.js","sourcesContent":["/* eslint-disable import/extensions */\n/* eslint-disable import/no-unresolved */\nimport React, { useState, useEffect } from 'react';\nimport { getProjectList, deleteProject } from 'services/project';\nimport { Project } from 'typings/project';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { Icon, message, Popconfirm } from 'antd';\n\ninterface Props extends RouteComponentProps {\n  setCurId: React.Dispatch<React.SetStateAction<string>>;\n}\nfunction ProjectList(props: Props) {\n  const [projectList, setProjectList] = useState<Project[]>([]);\n\n  const goDetail = (id: string) => {\n    props.history.push(`/project/${id}`);\n  };\n\n  const getAllProject = async () => {\n    try {\n      const rs = await getProjectList();\n      if (rs) {\n        setProjectList(rs);\n        props.setCurId(rs[0].projectId);\n      }\n    } catch (error) {\n      console.log(error);\n      setProjectList([]);\n    }\n  };\n\n  const delProj = async (projectId: string) => {\n    if (!projectId) return;\n    try {\n      const param = {\n        projectId,\n      };\n      const rs = await deleteProject(param);\n      if (rs) {\n        getAllProject();\n        message.success('删除成功');\n      }\n    } catch (error) {\n      console.log(error);\n      message.success(`删除失败: ${error}`);\n    }\n  };\n\n  // 取消删除\n  const cancel = (e: React.MouseEvent<HTMLElement, MouseEvent> | undefined) => {\n    console.log(e);\n  };\n\n  useEffect(() => {\n    getAllProject();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div className=\"project-list\">\n      {projectList.map((item: Project) => (\n        <div\n          key={item.name}\n          className=\"project-list-item\"\n          onClick={() => {\n            props.setCurId(item.projectId);\n          }}\n        >\n          <h2>{item.name}</h2>\n          <span className=\"project-tit\">项目描述</span>\n          <p className=\"project-desc\">{item.desc}</p>\n          {/* <span className=\"project-tit\">项目路径</span>\n          <p className=\"project-url\">{item.baseUrl}</p>\n          <span className=\"project-tit\">代理路径</span>\n          <p className=\"project-proxy-url\">\n            {item.proxy.target || '您还没有设置哦～'}\n          </p> */}\n          <Popconfirm\n            title=\"Are you sure delete this project?\"\n            onConfirm={() => {\n              delProj(item.projectId);\n            }}\n            onCancel={cancel}\n            okText=\"Yes\"\n            cancelText=\"No\"\n          >\n            <Icon title=\"删除\" className=\"delete-icon\" type=\"delete\" />\n          </Popconfirm>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default ProjectList;\n","/* eslint-disable no-underscore-dangle */\n/* eslint-disable import/extensions */\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport {\n  Icon,\n  Button,\n  Tag,\n  Table,\n  message,\n  Switch,\n  Descriptions,\n  Drawer,\n  Form,\n  Row,\n  Col,\n  Input,\n  Collapse,\n  Popconfirm,\n} from 'antd';\nimport Spots from 'components/spots';\nimport { queryProject, updateProject } from 'services/project';\nimport { Project } from 'typings/project';\nimport './index.less';\nimport { ColumnProps } from 'antd/lib/table';\nimport { Api } from 'typings/api';\nimport { FormComponentProps } from 'antd/lib/form';\nimport { deleteApi } from 'services/api';\nimport config from '../../../config/index';\nimport ProjectList from './components/ProjectList';\n\nconst { Panel } = Collapse;\n\nconst customPanelStyle = {\n  background: '#f7f7f7',\n  borderRadius: 4,\n  marginBottom: 24,\n  // paddingRight: 24,\n  border: 0,\n  width: '940px',\n  overflow: 'hidden',\n};\n\ninterface TableApi {\n  id: string;\n  name: string;\n  method: string;\n  url: string;\n  delay: number;\n  desc: string;\n  key: number;\n}\n\ninterface FormProps extends FormComponentProps {\n  [propName: string]: any; // 要传进来的属性\n}\n\nfunction ProjectDetail(props: any) {\n  const history = useHistory();\n  const headRef = useRef<HTMLDivElement>(null);\n\n  const methodColor = {\n    get: '#87d068',\n    post: '#2db7f5',\n    put: '#108ee9',\n    delete: '#f50',\n    patch: '#722ed1',\n  };\n\n  const initProject: Project = {\n    projectId: '',\n    proxy: {\n      target: '',\n    },\n    baseUrl: '',\n    desc: '',\n    name: '',\n    apis: [],\n    createTime: '',\n    modifiedTime: '',\n  };\n  const [curId, setCurId] = useState<string>('');\n  const [project, setProject] = useState<Project>(initProject);\n  const [drawerVisible, setDrawerVisible] = useState<boolean>(false);\n\n  const query = useCallback(async () => {\n    if (!curId) return;\n    try {\n      const param = {\n        projectId: curId,\n      };\n      const rs = await queryProject(param);\n      if (rs) {\n        setProject(rs);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }, [curId]);\n\n  const delApi = async (apiId: string) => {\n    if (!apiId) return;\n    try {\n      const param = {\n        apiId,\n      };\n      const rs = await deleteApi(param);\n      if (rs) {\n        query();\n        message.success('删除成功');\n      }\n    } catch (error) {\n      console.log(error);\n      message.success(`删除失败: ${error}`);\n    }\n  };\n\n  // 取消删除\n  const cancel = (e: React.MouseEvent<HTMLElement, MouseEvent> | undefined) => {\n    console.log(e);\n  };\n\n  function handleScroll() {\n    const head = headRef.current as HTMLDivElement;\n    const app = document.getElementsByClassName('App')[0] as HTMLElement;\n    if (app.scrollTop >= 76) {\n      head.style.paddingTop = '16px';\n      head.style.paddingBottom = '16px';\n    }\n    if (app.scrollTop < 48) {\n      head.style.paddingTop = '30px';\n      head.style.paddingBottom = '30px';\n    }\n  }\n\n  const copyUrl = (record: TableApi) => {\n    console.log(record);\n    const path = `${config.host}:${config.port}/mock/${project.projectId +\n      project.baseUrl +\n      record.url}`;\n    const input = document.createElement('input');\n    input.setAttribute('readonly', 'readonly');\n    input.setAttribute('value', path);\n    document.body.appendChild(input);\n    input.select();\n    // input.setSelectionRange(0, 9999); // 在ios下使用\n    if (document.execCommand('copy')) {\n      document.execCommand('copy');\n      message.success(`${path} copied! 🎉`);\n    }\n    document.body.removeChild(input);\n  };\n\n  // 表格\n\n  const columns: ColumnProps<TableApi>[] = [\n    {\n      title: '接口名称',\n      dataIndex: 'name',\n      key: 'name',\n      align: 'center',\n      ellipsis: true,\n    },\n    {\n      title: '方法',\n      dataIndex: 'method',\n      key: 'method',\n      align: 'center',\n      ellipsis: true,\n      render: (text: string) => (\n        <Tag color={methodColor[text as keyof typeof methodColor]}>{text}</Tag>\n      ),\n    },\n    {\n      title: 'URL',\n      dataIndex: 'url',\n      key: 'url',\n      align: 'center',\n      ellipsis: true,\n    },\n    {\n      title: '延时',\n      dataIndex: 'delay',\n      key: 'delay',\n      align: 'center',\n      ellipsis: true,\n      render: (text: number) => <span>{`${text} ms`}</span>,\n    },\n    {\n      title: '描述',\n      dataIndex: 'desc',\n      key: 'desc',\n      align: 'center',\n      ellipsis: true,\n    },\n    {\n      title: '操作',\n      dataIndex: 'operation',\n      key: 'operation',\n      align: 'center',\n      ellipsis: true,\n      render: (text, record) => (\n        <>\n          <Icon\n            title=\"复制接口地址\"\n            className=\"opera-btn\"\n            type=\"copy\"\n            onClick={() => {\n              copyUrl(record);\n            }}\n          />\n          <Icon\n            title=\"编辑\"\n            className=\"opera-btn\"\n            type=\"edit\"\n            onClick={() => {\n              history.push(`/api/edit/${record.id}`);\n            }}\n          />\n          <Popconfirm\n            title=\"Are you sure delete this api?\"\n            onConfirm={() => {\n              delApi(record.id);\n            }}\n            onCancel={cancel}\n            okText=\"Yes\"\n            cancelText=\"No\"\n          >\n            <Icon title=\"删除\" className=\"opera-btn\" type=\"delete\" />\n          </Popconfirm>\n        </>\n      ),\n    },\n  ];\n\n  const data: TableApi[] = project.apis.map((item: Api, idx: number) => {\n    return {\n      id: item._id,\n      name: item.name,\n      method: item.options.method,\n      url: item.url,\n      delay: item.options.delay,\n      desc: item.desc || '- -',\n      key: idx,\n    };\n  });\n\n  // 跳转接口创建页\n  const goCreate = () => {\n    props.history.push(`/api/create?project=${curId}`);\n  };\n\n  // 抽屉\n  const showDrawer = () => {\n    setDrawerVisible(true);\n  };\n  const onDrawerClose = () => {\n    setDrawerVisible(false);\n  };\n\n  const handleSubmit = async (e: { preventDefault: () => void }) => {\n    e.preventDefault();\n    props.form.validateFields(async (err: any, fieldsValue: any) => {\n      if (!err) {\n        console.log(fieldsValue);\n        const { baseUrl, desc, name, target, cookie, status } = fieldsValue;\n        const param: Partial<Project> = {\n          projectId: project.projectId,\n          baseUrl: `/${baseUrl}`,\n          desc: desc || name,\n          name,\n          proxy: {\n            target: target ? `http://${target}` : '',\n            cookie: cookie || '',\n            status: status ? 1 : 0,\n          },\n        };\n        try {\n          const rs = await updateProject(param);\n          if (rs) {\n            message.success('项目保存成功');\n            query();\n            setDrawerVisible(false);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    });\n  };\n\n  useEffect(() => {\n    query();\n    (document.getElementsByClassName('App')[0] as HTMLElement).addEventListener(\n      'scroll',\n      handleScroll\n    );\n    return () => {\n      (document.getElementsByClassName(\n        'App'\n      )[0] as HTMLElement).removeEventListener('scroll', handleScroll);\n    };\n  }, [query]);\n\n  const { getFieldDecorator } = props.form;\n\n  return (\n    <div className=\"project-container\">\n      <ProjectList setCurId={setCurId} {...props} />\n      <div className=\"project-detail\">\n        <div ref={headRef} className=\"project-detail-header\">\n          <Spots />\n          <div className=\"header-info\">\n            <h2>{project.name}</h2>\n            <p>{project.desc}</p>\n          </div>\n          <div className=\"proxy-switch\">\n            {/* <p>代理开关</p>\n          <Switch size=\"small\" onChange={() => {}} /> */}\n            <Button type=\"primary\" icon=\"setting\" onClick={showDrawer}>\n              设置\n            </Button>\n          </div>\n        </div>\n        <div className=\"project-detail-content\">\n          <div className=\"baseInfo\">\n            <Spots />\n            <p className=\"tag\">\n              <span>Mock 地址</span>\n              {`${config.host}:${config.port}/mock/${project.projectId}${project.baseUrl}`}\n            </p>\n            <p className=\"tag\">\n              <span>Project ID</span>\n              {project.projectId}\n            </p>\n            {/* <p className=\"tag\">\n            <span>代理地址</span>\n            {project.proxy.target || '您还没有设置哦～'}\n          </p> */}\n            <div className=\"opera\">\n              <Button type=\"primary\" icon=\"plus\" onClick={goCreate}>\n                创建接口\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"proxy-info\">\n            <Descriptions title=\"代理信息\" column={2}>\n              <Descriptions.Item label=\"target\">\n                {project.proxy.target || '您还没有设置哦～'}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"代理状态\">\n                {project.proxy.status == 0 ? (\n                  <Tag color=\"#f25252\">关</Tag>\n                ) : (\n                  <Tag color=\"#00cd7e\">开</Tag>\n                )}\n              </Descriptions.Item>\n            </Descriptions>\n            <p className=\"mb-10 ant-descriptions-item-label\">cookie:</p>\n            <Collapse\n              bordered={false}\n              // defaultActiveKey={['1']}\n              expandIcon={({ isActive }) => (\n                <Icon type=\"caret-right\" rotate={isActive ? 90 : 0} />\n              )}\n            >\n              <Panel\n                header={\n                  <p style={{ maxWidth: '100%' }} className=\"ellipsis\">\n                    {project.proxy.cookie || '--'}\n                  </p>\n                }\n                key=\"1\"\n                style={customPanelStyle}\n              >\n                <span className=\"cookie\">{project.proxy.cookie || '--'}</span>\n              </Panel>\n            </Collapse>\n          </div>\n\n          <div className=\"api-list\">\n            <Table<TableApi>\n              size=\"middle\"\n              columns={columns}\n              expandedRowRender={record => (\n                <div>\n                  <p>\n                    <b className=\"mr-20\">接口名称: </b>\n                    {`${record.name}`}\n                  </p>\n                  <p>\n                    <b className=\"mr-20\">url: </b>\n                    {`${record.url}`}\n                  </p>\n                  <p>\n                    <b className=\"mr-20\">描述: </b>\n                    {`${record.desc}`}\n                  </p>\n                </div>\n              )}\n              dataSource={data}\n            />\n          </div>\n          <div style={{ height: '40px' }} />\n        </div>\n\n        <Drawer\n          title=\"项目设置\"\n          width={720}\n          onClose={onDrawerClose}\n          visible={drawerVisible}\n          bodyStyle={{ paddingBottom: 80 }}\n        >\n          <Form layout=\"vertical\" hideRequiredMark onSubmit={handleSubmit}>\n            <Row gutter={16}>\n              <Col span={12}>\n                <Form.Item label=\"项目名称\">\n                  {getFieldDecorator('name', {\n                    rules: [\n                      {\n                        required: true,\n                        message: '名称不能为空',\n                      },\n                      {\n                        pattern: /^[\\u4e00-\\u9fa5a-zA-Z0-9\\-_.]{0,30}$/,\n                        message:\n                          '仅支持汉字、英文字母、数字、下划线(_)、连字符(-)、点(.)',\n                      },\n                    ],\n                    initialValue: project.name,\n                  })(<Input maxLength={30} placeholder=\"project\" />)}\n                </Form.Item>\n              </Col>\n              <Col span={12}>\n                <Form.Item label=\"项目基础URL\">\n                  {getFieldDecorator('baseUrl', {\n                    rules: [\n                      {\n                        required: true,\n                        message: '基础URL不能为空',\n                      },\n                      {\n                        pattern: /^[a-zA-Z]*$/,\n                        message: '格式为大小写英文字母',\n                      },\n                    ],\n                    initialValue: project.baseUrl.substr(1),\n                  })(\n                    <Input\n                      addonBefore=\"/\"\n                      maxLength={30}\n                      placeholder=\"example\"\n                    />\n                  )}\n                </Form.Item>\n              </Col>\n            </Row>\n            <Row gutter={16}>\n              <Col span={24}>\n                <Form.Item label=\"项目描述\">\n                  {getFieldDecorator('desc', {\n                    initialValue: project.desc,\n                  })(<Input.TextArea rows={4} placeholder=\"请输入项目描述\" />)}\n                </Form.Item>\n              </Col>\n            </Row>\n            <Row gutter={16}>\n              <Col span={24}>\n                <Form.Item label=\"代理状态\">\n                  {getFieldDecorator('status', {\n                    valuePropName: 'checked',\n                    initialValue: project.proxy.status == 1,\n                  })(<Switch size=\"default\" />)}\n                </Form.Item>\n              </Col>\n            </Row>\n            <Row gutter={16}>\n              <Col span={24}>\n                <Form.Item label=\"项目代理URL\">\n                  {getFieldDecorator('target', {\n                    rules: [\n                      {\n                        pattern: /^((https?:\\/\\/)?(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\\.)+[a-zA-Z]+)(:\\d+)?(\\/.*)?(\\?.*)?(#.*)?$/,\n                        message: '格式不正确',\n                      },\n                    ],\n                    initialValue: project.proxy.target.substr(7),\n                  })(\n                    <Input\n                      addonBefore=\"http://\"\n                      maxLength={255}\n                      placeholder=\"www.abc.com\"\n                    />\n                  )}\n                </Form.Item>\n              </Col>\n            </Row>\n            <Row gutter={16}>\n              <Col span={24}>\n                <Form.Item label=\"cookie\">\n                  {getFieldDecorator('cookie', {\n                    initialValue: project.proxy.cookie,\n                  })(<Input.TextArea rows={5} placeholder=\"cookie\" />)}\n                </Form.Item>\n              </Col>\n            </Row>\n            <Form.Item\n              style={{\n                position: 'absolute',\n                right: 0,\n                bottom: 0,\n                width: '100%',\n                borderTop: '1px solid #e9e9e9',\n                padding: '10px 16px',\n                background: '#fff',\n                textAlign: 'center',\n              }}\n            >\n              <Button htmlType=\"submit\" type=\"primary\">\n                保存\n              </Button>\n            </Form.Item>\n            {/* <div\n            style={{\n              position: 'absolute',\n              right: 0,\n              bottom: 0,\n              width: '100%',\n              borderTop: '1px solid #e9e9e9',\n              padding: '10px 16px',\n              background: '#fff',\n              textAlign: 'right',\n            }}\n          >\n            <Button onClick={onDrawerClose} style={{ marginRight: 8 }}>\n              Cancel\n            </Button>\n            <Form.Item>\n              <Button htmlType=\"submit\" type=\"primary\">\n                Submit\n              </Button>\n            </Form.Item>\n          </div> */}\n          </Form>\n        </Drawer>\n\n        <Link to=\"/project/create\">\n          <div className=\"add\">\n            <Icon type=\"plus\" />\n          </div>\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default Form.create<FormProps>({})(ProjectDetail);\n","import axios, { AxiosRequestConfig } from 'axios';\nimport { message, notification } from 'antd';\n\ntype Response<T> = {\n  [P in keyof T]: T[P];\n} & { code: number | string };\n\n// HTTP code码\nconst codeMessage: { [key: string]: string } = {\n  200: '服务器成功返回请求的数据。',\n  201: '无数据',\n  202: '一个请求已经进入后台排队（异步任务）。',\n  204: '删除数据成功。',\n  400: '发出的请求有错误，服务器没有进行新建或修改数据的操作。',\n  401: '用户没有权限（令牌、用户名、密码错误）。',\n  403: '用户没有访问权限',\n  404: '发出的请求针对的是不存在的记录，服务器没有进行操作。',\n  405: '方法不被允许',\n  406: '请求的格式不可得。',\n  410: '请求的资源被永久删除，且不会再得到的。',\n  422: '当创建一个对象时，发生一个验证错误。',\n  500: '服务器发生错误，请检查服务器。',\n  502: '网关错误。',\n  503: '服务不可用，服务器暂时过载或维护。',\n  504: '网关超时。',\n};\n\nconst getBaseUrl = () => {\n  if (process.env.NODE_ENV === 'development') {\n    // 如果在开发环境的时候可以用于本地联调\n    // return 'http://localhost:1988';\n  }\n  return '';\n};\n\n// 新创建一个axios实例，并进行基础配置\nconst instance = axios.create({\n  baseURL: getBaseUrl(),\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n    // \"Content-Type\":\"application/x-www-form-urlencoded;charset=utf-8\"\n  },\n});\n\n// 添加请求拦截器\ninstance.interceptors.request.use(\n  config => {\n    // 再次设置token或者添加loading等请求前的操作\n    // 添加一个loading\n    // store.dispatch(actions.showLoading(true));\n    return config;\n  },\n  error => {\n    return Promise.reject(error);\n  }\n);\n\n// 添加xi响应拦截器\ninstance.interceptors.response.use(\n  response => {\n    // 响应数据后做点什么\n    // 添加一个loading\n    // store.dispatch(actions.showLoading(false));\n    // 存在业务异常 抛出给业务代码去捕获\n    const { data } = response;\n    if (data.code != 200) {\n      const msg = data.msg || data.message || '';\n      message.warning(msg);\n      return Promise.reject(data);\n    }\n    // 不存在业务异常返回数据\n    return data;\n  },\n  error => {\n    if (error && error.response) {\n      const { status } = error.response;\n      console.warn(\n        `http error: status-${status} message-${codeMessage[status]}`\n      );\n\n      if (codeMessage[status] !== null || undefined) {\n        notification.warning({\n          placement: 'topRight',\n          duration: 2,\n          message: '提示',\n          description: `接口：${error.response.data.path}，${error.response.data.message}`,\n        });\n      } else {\n        notification.warning({\n          placement: 'topRight',\n          duration: 2,\n          message: '提示',\n          description: error,\n        });\n      }\n    }\n    return Promise.reject(error); // 非业务异常无需抛出错误 内部吞掉\n  }\n);\n\n/**\n * get请求\n * @method get\n * @param {url, params, loading} 请求地址，请求参数，是否需要加载层\n */\nconst get = (url: string, params: any) => {\n  return new Promise((resolve, reject) => {\n    // {\n    //   params: params\n    // }\n    instance\n      .get(url, params)\n      .then(res => {\n        resolve(res);\n      })\n      ['catch'](err => {\n        reject(err);\n      });\n  });\n};\n/**\n * post请求\n * @method post\n * @param {url, params} 请求地址，请求参数，是否需要加载层\n */\nconst post = (url: string, data: any) => {\n  return new Promise((resolve, reject) => {\n    // qs.stringify(data)\n    instance\n      .post(url, data)\n      .then(res => {\n        console.log(res);\n        resolve(res);\n      })\n      ['catch'](err => {\n        reject(err);\n      });\n  });\n};\n\nfunction request<T>(config: AxiosRequestConfig): Promise<Response<T>> | null {\n  let newUrl = config.url;\n  if (\n    (config.method === 'GET' ||\n      config.method === 'DELETE' ||\n      config.method === 'PUT') &&\n    config.data\n  ) {\n    const param: string[] = [];\n    Object.keys(config.data).map((v: string, k: number) => {\n      param.push(`${v}=${encodeURIComponent(config.data[v])}`);\n    });\n    const paramStr = param.join('&');\n    newUrl = `${newUrl}?${paramStr}`;\n  }\n  const curConfig = { ...config, url: newUrl };\n  return (instance.request<Response<T>>(curConfig) as any) as Promise<\n    Response<T>\n  >;\n}\nexport { get, post, request, Response };\n","import React, { useMemo } from 'react';\nimport './index.less';\n\nfunction Spots(props: any) {\n  const NUM = 10;\n  const getRandomColor = () => {\n    const r = Math.floor(Math.random() * 100) + 155;\n    const g = Math.floor(Math.random() * 100) + 115;\n    const b = Math.floor(Math.random() * 100) + 115;\n    return `rgb(${r},${g},${b})`;\n  };\n  const getRandomWidth = () => {\n    return Math.floor(Math.random() * 60);\n  };\n  const getRandomTop = () => {\n    return `${Math.floor(Math.random() * 100)}%`;\n  };\n  const getRandomMargin = () => {\n    return `-${Math.floor(Math.random() * 60)}px`;\n  };\n\n  const SpotsContent = useMemo(() => {\n    const sArr: number[] = [];\n    for (let i = 0; i < NUM; i++) {\n      sArr.push(i);\n    }\n    return (\n      <>\n        {sArr.map(k => {\n          const radius = getRandomWidth();\n          return (\n            <span\n              key={k}\n              className=\"decorate\"\n              style={{\n                background: getRandomColor(),\n                width: radius,\n                height: radius,\n                marginTop: getRandomMargin(),\n                marginLeft: getRandomMargin(),\n                top: getRandomTop(),\n                left: getRandomTop(),\n              }}\n            />\n          );\n        })}\n      </>\n    );\n  }, []);\n\n  return <div className=\"spots\">{SpotsContent}</div>;\n}\n\nexport default Spots;\n","import { Api } from 'typings/api';\nimport { request, Response } from '../utils/request';\n\ninterface RequestResponse {\n  code: number;\n  message: string;\n  // success: boolean;\n  data: any;\n}\n\n// 接口创建\nexport const apiCreate = async (params: Partial<Api>) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/create',\n    method: 'POST',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 接口查询\nexport const queryApi = async (params: { apiId: string }) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/query',\n    method: 'GET',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 接口更新\nexport const updateApi = async (params: Api) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/update',\n    method: 'POST',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 接口删除\nexport const deleteApi = async (params: { apiId: string }) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/api/delete',\n    method: 'DELETE',\n    data: params,\n  });\n  return res && res.data;\n};\n","import { request, Response } from '../utils/request';\nimport { Project } from '../typings/project';\n\ninterface RequestResponse {\n  code: number;\n  message: string;\n  success: boolean;\n  data: any;\n}\n// 项目创建\nexport const projectCreate = async (params: Partial<Project>) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/project/create',\n    method: 'POST',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 获取项目列表\nexport const getProjectList = async () => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/project/list',\n    method: 'GET',\n  });\n  return res && res.data;\n};\n\n// 查询项目\nexport const queryProject = async (params: { projectId: string }) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/project/query',\n    method: 'GET',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 编辑项目 /project/update\nexport const updateProject = async (params: Partial<Project>) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/project/update',\n    method: 'POST',\n    data: params,\n  });\n  return res && res.data;\n};\n\n// 删除项目\nexport const deleteProject = async (params: { projectId: string }) => {\n  const res = await request<Response<RequestResponse>>({\n    url: '/project/delete',\n    method: 'DELETE',\n    data: params,\n  });\n  return res && res.data;\n};\n","module.exports = {\n  host: 'http://localhost',\n  port: '1988',\n};\n"],"sourceRoot":""}